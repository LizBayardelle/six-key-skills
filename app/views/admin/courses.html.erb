<header class="text-center mt-5 mb-4">
  <p>
    <%= link_to 'New Course', new_course_path %>
    &nbsp;&nbsp;|&nbsp;&nbsp;
    <%= link_to 'Courses Page', courses_path %>
  </p>

  <h1 class="font-weight-bold">Courses</h1>
</header>

<section class="text-center mb-5 my-"> <!-- blogs -->
  <div class="container">  <!-- container -->

    <div class="table-responsive" style="width: 100%">
      <table id="dtBasicExample" class="table table-striped table-bordered" width="100%">
        <thead>
          <tr>
            <th>Name</th>
            <th>Modules</th>
            <th>Lessons</th>
            <th>Active</th>
            <th>Created By</th>
            <th>Price</th>
            <th>Students</th>
          </tr>
        </thead>

        <tbody>
          <% @courses.each do |course| %>
            <tr>
              <td>
                <%= link_to course.name, course %> ( <%= link_to '<i class="fas fa-pen"></i>'.html_safe, edit_course_path(course) %>  <%= link_to '<i class="fas fa-times"></i>'.html_safe, course, method: :delete, data: { confirm: 'Are you sure?' } %> )
              </td>
              <td><%= course.course_modules.count %></td>
              <td>
                <% lessons = 0 %>
                <% course.course_modules.each do |mod| %>
                  <% lessons += mod.lessons.count %>
                <% end %>
                <%= lessons %>
              </td>
              <td><% if course.active %><i class="fas fa-check"></i><% end %></td>

              <td><%= course.user.full_name %></td>
              <td><%= number_to_currency(course.price) %></td>
              <td>Students (TBD)</td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div> <!-- table responsive -->


  </div> <!-- container -->
</section>









<script>
  $(document).ready(function () {
    $('#dtBasicExample').DataTable();
    $('.dataTables_length').addClass('bs-select');
  });
</script>
